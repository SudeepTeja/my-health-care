{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sudeepteja/Downloads/My_Health_Care/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sudeepteja/Downloads/My_Health_Care/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sudeepteja/Downloads/My_Health_Care/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from'./PhoneOtpAuth.module.css';import React,{useState}from'react';import{useCallback}from'react/cjs/react.production.min';import{firebase,auth}from'../../firebase';import{RecaptchaVerifier,signInWithPhoneNumber}from'firebase/auth';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PhoneOtpAuth=function PhoneOtpAuth(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),mynumber=_useState2[0],setnumber=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),otp=_useState4[0],setotp=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),confirmObj=_useState6[0],setConfirmobj=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var history=useHistory();var setUpRecaptch=function setUpRecaptch(number){var recaptchaVerifer=new RecaptchaVerifier('recaptcha-container',{},auth);recaptchaVerifer.render();number=\"+91\"+number;return signInWithPhoneNumber(auth,number,recaptchaVerifer);};var sendOtp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setError(\"\");if(!(mynumber===''||mynumber===undefined)){_context.next=4;break;}return _context.abrupt(\"return\",setError(\"enter valid number\"));case 4:_context.prev=4;_context.next=7;return setUpRecaptch(mynumber);case 7:response=_context.sent;console.log(response);setConfirmobj(response);setToggle(true);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);setError(_context.t0.message);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function sendOtp(_x){return _ref.apply(this,arguments);};}();var verifyOtp=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(otp);if(!(otp===''||otp===undefined)){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:_context2.prev=4;_context2.next=7;return confirmObj.confirm(otp);case 7:history.replace('/myForm');_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[4,10]]);}));return function verifyOtp(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{className:classes.form,style:{display:!toggle?'block':'none'},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.control,children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Enter Phone Number\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.control,children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setnumber(e.target.value);},placeholder:\"phone number\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"button\",{onClick:sendOtp,children:\"Send OTP\"})})]}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,style:{display:toggle?'block':'none'},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.control,children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Enter OTP\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.control,children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setotp(e.target.value);},placeholder:\"enter otp\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"button\",{onClick:verifyOtp,children:\"Verify OTP\"})})]})]});};export default PhoneOtpAuth;","map":{"version":3,"names":["classes","React","useState","useCallback","firebase","auth","RecaptchaVerifier","signInWithPhoneNumber","useHistory","PhoneOtpAuth","mynumber","setnumber","otp","setotp","confirmObj","setConfirmobj","toggle","setToggle","error","setError","history","setUpRecaptch","number","recaptchaVerifer","render","sendOtp","e","preventDefault","undefined","response","console","log","message","verifyOtp","confirm","replace","form","display","control","target","value","action"],"sources":["/Users/sudeepteja/Downloads/My_Health_Care/src/components/Auth/PhoneOtpAuth.js"],"sourcesContent":["import classes from './PhoneOtpAuth.module.css';\nimport React, { useState } from 'react';\nimport { useCallback } from 'react/cjs/react.production.min';\nimport { firebase, auth } from '../../firebase';\nimport { RecaptchaVerifier, signInWithPhoneNumber } from 'firebase/auth';\nimport { useHistory } from 'react-router-dom';\n\nconst PhoneOtpAuth = () => {\n\n    const [mynumber, setnumber] = useState(\"\");\n    const [otp, setotp] = useState('');\n    const [confirmObj, setConfirmobj] = useState('');\n    const [toggle, setToggle] = useState(false);\n    const [error, setError] = useState('');\n\n    const history = useHistory();\n\n    const setUpRecaptch = (number) => {\n        const recaptchaVerifer = new RecaptchaVerifier(\n            'recaptcha-container',\n            {},\n            auth\n        );\n        recaptchaVerifer.render();\n        number = \"+91\" + number;\n        return signInWithPhoneNumber(auth, number, recaptchaVerifer);\n    }\n\n    const sendOtp = async (e) => {\n        e.preventDefault();\n        setError(\"\");\n        if (mynumber === '' || mynumber === undefined) return setError(\"enter valid number\")\n\n        try {\n            const response = await setUpRecaptch(mynumber);\n            console.log(response);\n            setConfirmobj(response);\n            setToggle(true);\n        } catch (err) {\n            setError(err.message);\n            console.log(err);\n        }\n    }\n\n    const verifyOtp = async (e) => {\n        e.preventDefault();\n        console.log(otp);\n        if (otp === '' || otp === undefined) return\n        try {\n            await confirmObj.confirm(otp);\n            history.replace('/myForm');\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    return (\n        <div>\n            <form className={classes.form} style={{ display: !toggle ? 'block' : 'none'}}>\n                <div className={classes.control}>\n                    <label htmlFor='email'>Enter Phone Number</label>\n                </div>\n                <div className={classes.control}>  \n                    <input onChange={(e) => { \n                        setnumber(e.target.value) }}\n                            placeholder=\"phone number\" />\n                </div>\n                <div className={classes.action}>\n                    <div id=\"recaptcha-container\" />\n                </div>\n                <div className={classes.action}>\n                    <button onClick={sendOtp}>Send OTP</button>\n                </div>\n            </form>\n\n            <form className={classes.form} style={{ display: toggle ? 'block' : 'none'}}>\n                <div className={classes.control}>\n                    <label htmlFor='email'>Enter OTP</label>\n                </div>\n                <div className={classes.control}>  \n                    <input onChange={(e) => { \n                        setotp(e.target.value) }}\n                            placeholder=\"enter otp\" />\n                </div>\n                <div className={classes.action}>\n                    <div id=\"recaptcha-container\" />\n                </div>\n                <div className={classes.action}>\n                    <button onClick={verifyOtp}>Verify OTP</button>\n                </div>\n            </form>\n        </div>\n\n        \n    )\n}\n\nexport default PhoneOtpAuth;"],"mappings":"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"},"metadata":{},"sourceType":"module"}